---
# vars file for roles/kuberneites
app: 'sample-nginx' # low case
version: 'v0.0.1'

ports:
  http: '30080'
  https: '30443'

domain:
  urlPrefix: 'http'
  url: '{{ app }}.my.private.domain.com' # do not modify
  validation_content: 'Welcome to nginx!' # case sensitive

kubernetes:
  content: 'something'

cert:
  country_name: DK
  email_address: garyfalos@cpan.org
  organization_name: JustForFun

nodePortPorts:
  http:
    after: 'appProtocol: http$'
    line: '      nodePort: {{ ports.http }}'
  https:
    after: 'appProtocol: https$'
    line: '      nodePort: {{ ports.https }}'
  trafficPolicy:
    after: 'type: LoadBalancer$'
    line: '  externalTrafficPolicy: Local'
  comment:
    after: 'type: LoadBalancer$'
    line: '  # so we can preserve source IP address'

kubeadm:
  cluster:
    namespace: 'sample'
  clusterRoleUser:
    name: 'admin-user'
    namespace: 'kubernetes-dashboard'

ingress:
  metadata:
    name: 'ingress-{{ app }}'
    namespace: '{{ kubeadm.cluster.namespace }}'
  spec:
    defaultBackend:
      service:
        name: 'ngnix-service'
        port:
          number: 80
    tls:
      hosts: '{{ domain.url }}'
    rules:
      host: '{{ domain.url }}'
      http:
        paths:
          path: '/'
          pathType: 'Prefix'
          backend: 
            service: 
              name: 'ngnix-service'
              port:
                number: 80
